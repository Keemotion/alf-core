#!/usr/bin/env ruby
module AlfLauncher

  def self.load
    begin
      $LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
      require "alf"
    rescue LoadError => ex
      require "rubygems"
      require "alf"
    end
  end
  
  def self.normalize(args)
    opts = []
    while !args.empty? && (args.first =~ /^\-/)
      opts << args.shift 
    end
    if args.empty? or (args.size == 1 && File.exists?(args.first))
      opts << "exec"
    end
    opts += args
  end
  
  def self.start(argv)
    load
    Alf::Command::Main.run(normalize(argv), __FILE__)
  end

end # module AlfLaucher
AlfLauncher.start(ARGV)